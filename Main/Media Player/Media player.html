<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Media Player</title>
<style>
/* Base */
body {
  margin:0;
  background:#0a0a0a;
  font-family:'Orbitron', sans-serif;
  color:#fff;
  overflow: hidden;
}
a { color:inherit; text-decoration:none; }

/* Container */
#container {
  display:flex;
  height:100vh;
  transition: all 0.3s ease;
}

/* Sidebar */
#sidebar {
  width:220px;
  background:#100000;
  padding:15px;
  overflow-y:auto;
  border-right:2px solid #ff073a;
  box-shadow: 0 0 20px #ff073a33 inset;
  transition: all 0.3s ease;
  backdrop-filter: blur(5px);
  border-radius:0 20px 20px 0;
}
#sidebar h3 {
  color:#ff073a;
  text-align:center;
  font-family:'Orbitron', sans-serif;
  text-transform:uppercase;
  letter-spacing:1px;
}
#sidebar ul {
  list-style:none;
  padding:0;
  margin-top:10px;
}
#sidebar li {
  cursor:pointer;
  margin:8px 0;
  padding:8px;
  background:#220000;
  border-radius:8px;
  transition: all 0.2s ease;
  box-shadow:0 0 10px #ff073a22;
}
#sidebar li:hover {
  background:#330000;
  box-shadow:0 0 15px #ff073a66;
  transform: scale(1.05);
}

/* Input Panel */
#playerPanel {
  flex:1;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  transition: all 0.3s ease;
}
#inputPanel {
  display:flex;
  margin-bottom:20px;
}
#mediaInput {
  width:450px;
  padding:12px;
  border:2px solid #ff073a;
  border-radius:10px 0 0 10px;
  background:#220000;
  color:#fff;
  outline:none;
  font-size:16px;
  transition: all 0.3s ease;
}
#mediaInput:focus {
  box-shadow:0 0 15px #ff073a77;
}
#playBtn {
  padding:12px 20px;
  border:2px solid #ff073a;
  border-left:none;
  border-radius:0 10px 10px 0;
  background:#ff073a;
  color:#000;
  cursor:pointer;
  font-weight:bold;
  text-transform:uppercase;
  letter-spacing:1px;
  transition: all 0.3s ease;
}
#playBtn:hover {
  box-shadow:0 0 20px #ff073aaa;
  transform: scale(1.05);
}

/* Overlay */
#overlay {
  position:fixed;
  top:0;
  left:0;
  width:100vw;
  height:100vh;
  background:rgba(0,0,0,0.95);
  display:none;
  justify-content:center;
  align-items:center;
  z-index:1000;
  flex-direction:column;
  transition: all 0.4s ease;
  opacity:0;
  backdrop-filter: blur(10px);
}
#overlay.show {
  display:flex;
  opacity:1;
}
#overlay iframe, #overlay video, #overlay audio {
  width:95vw;
  height:90vh;
  max-width:1920px;
  max-height:1080px;
  border-radius:20px;
  box-shadow: 0 0 50px #ff073a77;
  transition: all 0.4s ease;
  transform: scale(0.9);
}
#overlay.show iframe,
#overlay.show video,
#overlay.show audio {
  transform: scale(1);
}

/* Close Button */
#closeBtn {
  position:absolute;
  top:15px;
  right:25px;
  font-size:36px;
  cursor:pointer;
  color:#ff073a;
  text-shadow:0 0 10px #ff073aaa;
  transition: all 0.3s ease;
}
#closeBtn:hover {
  color:#fff;
  text-shadow:0 0 25px #ff073a;
}
</style>
</head>
<body>

<div id="container">
  <div id="sidebar">
    <h3>Recently Watched</h3>
    <ul id="recentList"></ul>
  </div>
  <div id="playerPanel">
    <div id="inputPanel">
      <input type="text" id="mediaInput" placeholder="Paste YouTube, YouTube Music, or media link">
      <button id="playBtn">Play</button>
    </div>
  </div>
</div>

<div id="overlay">
  <span id="closeBtn">&times;</span>
</div>

<script>
const playBtn = document.getElementById('playBtn');
const mediaInput = document.getElementById('mediaInput');
const overlay = document.getElementById('overlay');
const recentList = document.getElementById('recentList');

function addToRecent(link) {
  let links = JSON.parse(localStorage.getItem('recentLinks') || '[]');
  links.unshift(link);
  links = links.slice(0,10);
  localStorage.setItem('recentLinks', JSON.stringify(links));
  renderRecent();
}

function renderRecent() {
  const links = JSON.parse(localStorage.getItem('recentLinks') || '[]');
  recentList.innerHTML = '';
  links.forEach(l=>{
    const li = document.createElement('li');
    li.textContent = l;
    li.onclick = ()=>playMedia(l);
    recentList.appendChild(li);
  });
}

function parseYouTubeLink(url){
  try{
    const u = new URL(url);
    if(u.hostname.includes('youtu.be')) return { type:'video', id:u.pathname.slice(1) };
    if(u.hostname.includes('youtube.com') || u.hostname.includes('music.youtube.com')){
      if(u.searchParams.get('v')) return { type:'video', id:u.searchParams.get('v') };
      if(u.searchParams.get('list')) return { type:'playlist', id:u.searchParams.get('list') };
      const pathParts = u.pathname.split('/');
      if(pathParts.includes('shorts')) return { type:'video', id:pathParts[pathParts.length-1] };
    }
  }catch(e){ return null; }
  return null;
}

function playMedia(link){
  overlay.innerHTML = '<span id="closeBtn">&times;</span>';
  const closeBtn = overlay.querySelector('#closeBtn');
  closeBtn.onclick = ()=>overlay.classList.remove('show');

  let mediaElement;
  const yt = parseYouTubeLink(link);

  if(yt){
    mediaElement = document.createElement('iframe');
    if(yt.type==='video'){
      mediaElement.src = `https://www.youtube.com/embed/${yt.id}?autoplay=1`;
    } else if(yt.type==='playlist'){
      mediaElement.src = `https://www.youtube.com/embed/videoseries?list=${yt.id}&autoplay=1`;
    }
    mediaElement.allow = 'fullscreen; autoplay';
  } else if(link.endsWith('.mp4')){
    mediaElement = document.createElement('video');
    mediaElement.src = link;
    mediaElement.controls = true;
    mediaElement.autoplay = true;
  } else if(link.endsWith('.mp3')){
    mediaElement = document.createElement('audio');
    mediaElement.src = link;
    mediaElement.controls = true;
    mediaElement.autoplay = true;
  } else {
    mediaElement = document.createElement('iframe');
    mediaElement.src = link;
    mediaElement.allow = 'fullscreen';
  }

  overlay.appendChild(mediaElement);
  setTimeout(()=> overlay.classList.add('show'), 50); // smooth fade-in
  addToRecent(link);
}

playBtn.onclick = ()=>{
  const link = mediaInput.value.trim();
  if(link) playMedia(link);
}

renderRecent();
</script>

</body>
  </html>
